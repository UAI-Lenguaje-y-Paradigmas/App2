<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Informe Técnico del Proyecto App2 - Sistema de Gestión Agrícola</title>
    <link
      href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,700&display=swap"
      rel="stylesheet"
    />
    <style>
      /* Reset y configuración base */
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }
      body {
        font-family: "Open Sans", sans-serif;
        line-height: 1.6;
        background-color: #f8f9fa;
        color: #343a40;
        padding: 0;
        margin: 0;
      }
      .container {
        max-width: 960px;
        margin: 0 auto;
        padding: 0 20px;
      }
      header {
        background-color: #2e7d32;
        color: #ffffff;
        padding: 30px 0;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }
      .header-content {
        max-width: 960px;
        margin: 0 auto;
        padding: 0 20px;
        text-align: center;
      }
      header h1 {
        margin-bottom: 10px;
        font-size: 2.2rem;
      }
      header p {
        font-size: 1.2rem;
        opacity: 0.9;
      }
      nav {
        background-color: #fff;
        margin: 0;
        padding: 15px 0;
        position: sticky;
        top: 0;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        z-index: 100;
      }
      nav .container {
        overflow-x: auto;
      }
      nav ul {
        list-style: none;
        display: flex;
        flex-wrap: nowrap;
        justify-content: center;
        min-width: min-content;
      }
      nav ul li {
        margin: 5px 15px;
        white-space: nowrap;
      }
      nav ul li a {
        color: #2e7d32;
        text-decoration: none;
        font-weight: 600;
        transition: all 0.2s ease;
        padding: 5px 0;
        position: relative;
      }
      nav ul li a::after {
        content: "";
        position: absolute;
        bottom: 0;
        left: 0;
        width: 0;
        height: 2px;
        background-color: #2e7d32;
        transition: width 0.3s ease;
      }
      nav ul li a:hover::after {
        width: 100%;
      }
      main {
        padding: 40px 0;
      }
      h2 {
        color: #2e7d32;
        margin-top: 20px;
        margin-bottom: 20px;
        border-bottom: 2px solid #2e7d32;
        padding-bottom: 10px;
        font-size: 1.8rem;
      }
      p {
        margin: 16px 0;
        font-size: 1rem;
      }
      ul {
        margin: 16px 0 16px 20px;
      }
      ul li {
        margin-bottom: 8px;
      }
      pre {
        background-color: #e9ecef;
        padding: 15px;
        overflow-x: auto;
        border-radius: 8px;
        margin: 16px 0;
        border-left: 4px solid #2e7d32;
      }
      code {
        font-family: Consolas, Monaco, "Andale Mono", monospace;
        font-size: 0.95em;
      }
      .diagrama {
        text-align: center;
        margin: 30px 0;
        padding: 20px;
        background-color: #fff;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }
      .content-section {
        margin-bottom: 60px;
        background-color: #fff;
        padding: 30px;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
      }
      footer {
        background-color: #343a40;
        color: #ffffff;
        padding: 20px 0;
        text-align: center;
        font-size: 0.9rem;
      }
      /* Estilo para los enlaces de anclaje - scrolling suave */
      html {
        scroll-behavior: smooth;
        scroll-padding-top: 70px; /* Ajuste para la barra de navegación fija */
      }
      /* Estilos para resaltar los elementos strong */
      strong {
        color: #2e7d32;
        font-weight: 600;
      }
      /* Estilos para pantallas pequeñas */
      @media (max-width: 768px) {
        header h1 {
          font-size: 1.8rem;
        }
        header p {
          font-size: 1rem;
        }
        .content-section {
          padding: 20px;
        }
        nav {
          padding: 10px 0;
        }
      }
      /* Añadir un efecto de hover a las secciones */
      .content-section:hover {
        transform: translateY(-2px);
        transition: transform 0.3s ease;
      }
      /* Animación para cargar las secciones */
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      .content-section {
        animation: fadeIn 0.5s ease-out forwards;
      }
      .content-section:nth-child(1) {
        animation-delay: 0.1s;
      }
      .content-section:nth-child(2) {
        animation-delay: 0.2s;
      }
      .content-section:nth-child(3) {
        animation-delay: 0.3s;
      }
      .content-section:nth-child(4) {
        animation-delay: 0.4s;
      }
      .content-section:nth-child(5) {
        animation-delay: 0.5s;
      }
      .content-section:nth-child(6) {
        animation-delay: 0.6s;
      }
      .content-section:nth-child(7) {
        animation-delay: 0.7s;
      }
      /* Estilo del botón para subir */
      #scrollToTopBtn {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background-color: #2e7d32;
        color: #ffffff;
        border: none;
        border-radius: 50%;
        width: 50px;
        height: 50px;
        cursor: pointer;
        display: none;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
        z-index: 200;
      }
      #scrollToTopBtn:hover {
        background-color: #1b5e20;
      }
    </style>
  </head>
  <body>
    <header>
      <div class="header-content">
        <h1>Informe Técnico del Proyecto App2 - Sistema de Gestión Agrícola</h1>
        <p>Optimización, escalabilidad y buenas prácticas de POO en Java</p>
      </div>
    </header>

    <nav>
      <div class="container">
        <ul>
          <li><a href="#arquitectura">Arquitectura</a></li>
          <li><a href="#modelos">Modelos de Dominio</a></li>
          <li><a href="#principios">Principios POO</a></li>
          <li><a href="#patrones">Patrones de Diseño</a></li>
          <li><a href="#persistencia">Persistencia CSV</a></li>
          <li><a href="#diagrama">Diagrama de Clases</a></li>
          <li><a href="#ui">Interfaz de Usuario</a></li>
          <li><a href="#reflexiones">Reflexiones</a></li>
        </ul>
      </div>
    </nav>

    <main>
      <div class="container">
        <section id="arquitectura" class="content-section">
          <h2>1. Arquitectura del Sistema</h2>
          <p>
            El proyecto se ha organizado siguiendo una arquitectura en capas que separa claramente las responsabilidades, facilitando el mantenimiento y la escalabilidad del código:
          </p>
          <ul>
            <li>
              <strong>Models/</strong> – Contiene las clases de dominio que representan las entidades del sistema agrícola: <code>Cultivo</code>, <code>Parcela</code>, <code>Actividad</code>, etc.
            </li>
            <li>
              <strong>Services/</strong> – Alberga la lógica de negocio y los servicios que operan sobre los modelos, incluyendo el manejo de persistencia en CSV.
            </li>
            <li>
              <strong>UI/</strong> – Implementa la interfaz de usuario por consola, con menús interactivos para la gestión del sistema.
            </li>
          </ul>
          <p>
            Esta división en capas proporciona una clara separación de responsabilidades, facilitando la comprensión del código, las pruebas unitarias y la incorporación de nuevas funcionalidades sin afectar al resto del sistema.
          </p>
        </section>

        <section id="modelos" class="content-section">
          <h2>2. Modelos de Dominio</h2>
          <p>
            Las principales clases de dominio implementadas en el sistema son:
          </p>
          <pre><code>public class Cultivo {
    private int id;
    private String nombre;
    private String variedad;
    private TipoSuelo sueloRecomendado;
    private int diasHastaCosecha;
    private EstadoCultivo estado;
    private List<Actividad> actividades;
    
    // Constructor, getters, setters y métodos adicionales
}</code></pre>
          <p>
            Los modelos clave del sistema incluyen:
          </p>
          <ul>
            <li>
              <code>Cultivo</code>: Representa un tipo de planta con sus características específicas como variedad, tiempo de maduración y requisitos de suelo.
            </li>
            <li>
              <code>Parcela</code>: Modela una unidad de terreno agrícola con propiedades como tamaño, tipo de suelo y los cultivos asignados.
            </li>
            <li>
              <code>Actividad</code>: Representa las tareas agrícolas como riego, fertilización o cosecha, asociadas a un cultivo específico.
            </li>
            <li>
              <code>Enumeraciones</code>: Se utilizan tipos enumerados como <code>EstadoCultivo</code>, <code>TipoSuelo</code> y <code>TipoActividad</code> para representar valores constantes y mejorar la seguridad de tipos.
            </li>
          </ul>
          <p>
            Los modelos implementan interfaces y relaciones que reflejan fielmente las interacciones en un entorno agrícola real, garantizando que el sistema sea tanto preciso como flexible.
          </p>
        </section>

        <section id="principios" class="content-section">
          <h2>3. Principios de POO Aplicados</h2>
          <p>
            El diseño del sistema se basa en los siguientes principios fundamentales de la Programación Orientada a Objetos:
          </p>
          <ul>
            <li>
              <strong>Encapsulación</strong>: Todas las clases de dominio implementan atributos privados con métodos de acceso controlado (getters/setters), protegiendo los datos y garantizando la integridad del sistema.
            </li>
            <li>
              <strong>Herencia</strong>: Se utiliza para especializar comportamientos. Por ejemplo, las clases <code>ActividadRiego</code> y <code>ActividadFertilizacion</code> extienden de una clase base <code>Actividad</code>.
            </li>
            <li>
              <strong>Polimorfismo</strong>: Los servicios operan sobre interfaces, permitiendo el intercambio de implementaciones sin modificar el código cliente.
            </li>
            <li>
              <strong>Abstracción</strong>: Se emplean interfaces y clases abstractas para definir comportamientos sin especificar la implementación concreta.
            </li>
          </ul>
          <p>
            Además, se han seguido los principios SOLID para garantizar un diseño robusto y mantenible:
          </p>
          <ul>
            <li>
              <strong>Responsabilidad Única (S)</strong>: Cada clase tiene una sola razón para cambiar.
            </li>
            <li>
              <strong>Abierto/Cerrado (O)</strong>: Las clases están abiertas para extensión pero cerradas para modificación.
            </li>
            <li>
              <strong>Sustitución de Liskov (L)</strong>: Las subclases pueden sustituir a sus clases base sin alterar el comportamiento del programa.
            </li>
            <li>
              <strong>Segregación de Interfaces (I)</strong>: Se prefieren interfaces específicas en lugar de una interfaz general.
            </li>
            <li>
              <strong>Inversión de Dependencias (D)</strong>: Los módulos de alto nivel no dependen de los de bajo nivel, sino de abstracciones.
            </li>
          </ul>
        </section>

        <section id="patrones" class="content-section">
          <h2>4. Patrones de Diseño Implementados</h2>
          <p>
            Para resolver problemas recurrentes de diseño, se han implementado varios patrones que mejoran la estructura y el comportamiento del sistema:
          </p>
          <ul>
            <li>
              <strong>Singleton</strong>: Utilizado en los servicios de gestión para garantizar una única instancia que coordine el acceso a los datos.
            </li>
            <li>
              <strong>Repository</strong>: Implementado para abstraer el acceso a los datos, independientemente de la fuente (CSV, base de datos, etc.).
            </li>
            <li>
              <strong>Factory Method</strong>: Empleado para la creación de diferentes tipos de actividades agrícolas según los requisitos específicos.
            </li>
            <li>
              <strong>Observer</strong>: Aplicado para notificar cambios en el estado de los cultivos a los componentes interesados.
            </li>
          </ul>
          <p>
            La implementación de estos patrones ha contribuido significativamente a la robustez del sistema, facilitando la extensibilidad y el mantenimiento del código a lo largo del tiempo.
          </p>
        </section>

        <section id="persistencia" class="content-section">
          <h2>5. Persistencia de Datos en CSV</h2>
          <p>
            El sistema implementa un mecanismo de persistencia basado en archivos CSV que permite almacenar y recuperar la información de cultivos, parcelas y actividades:
          </p>
          <pre><code>public class CsvRepository&lt;T&gt; implements Repository&lt;T&gt; {
    private final String filePath;
    private final Function&lt;String[], T&gt; mapper;
    private final Function&lt;T, String[]&gt; toStringArray;
    
    // Constructor y métodos implementados
    
    @Override
    public List&lt;T&gt; findAll() {
        List&lt;T&gt; items = new ArrayList&lt;&gt;();
        try (BufferedReader reader = new BufferedReader(new FileReader(filePath))) {
            // Saltamos la cabecera
            reader.readLine();
            
            String line;
            while ((line = reader.readLine()) != null) {
                String[] values = line.split(",");
                items.add(mapper.apply(values));
            }
        } catch (IOException e) {
            // Manejo de excepciones
        }
        return items;
    }
    
    @Override
    public void saveAll(List&lt;T&gt; items) {
        // Implementación de guardado
    }
}</code></pre>
          <p>
            El sistema de persistencia incluye:
          </p>
          <ul>
            <li>
              <strong>Lectura automática</strong> al iniciar la aplicación, cargando el estado previo del sistema.
            </li>
            <li>
              <strong>Escritura automática</strong> al finalizar, asegurando que todos los cambios queden registrados.
            </li>
            <li>
              <strong>Manejo de errores</strong> para situaciones como archivos inexistentes o con formato incorrecto.
            </li>
            <li>
              <strong>Validación de datos</strong> para garantizar la integridad de la información almacenada.
            </li>
          </ul>
          <p>
            Esta implementación genérica permite adaptarse fácilmente a diferentes entidades del sistema, manteniendo un código limpio y evitando la duplicación.
          </p>
        </section>

        <section id="diagrama" class="content-section">
          <h2>6. Diagrama de Clases</h2>
          <p>
            A continuación se presenta el diagrama de clases del sistema, que ilustra las relaciones entre los diferentes componentes:
          </p>
          <div class="diagrama">
            <a href="docs/diagrama_clases.png" target="_blank">
              Haz click aquí para ver el diagrama de clases completo
            </a>
          </div>
          <p>
            El diagrama de clases muestra:
          </p>
          <ul>
            <li>Las clases de dominio y sus relaciones (asociación, composición, herencia)</li>
            <li>Las interfaces que definen los contratos entre componentes</li>
            <li>Los servicios que implementan la lógica de negocio</li>
            <li>Los repositorios que gestionan la persistencia</li>
          </ul>
          <p>
            Esta estructura organizativa permite una clara visualización de las responsabilidades y dependencias entre componentes, facilitando la comprensión global del sistema.
          </p>
        </section>

        <section id="ui" class="content-section">
          <h2>7. Interfaz de Usuario</h2>
          <p>
            La interfaz de usuario del sistema es una aplicación de consola que proporciona una experiencia intuitiva a través de menús textuales:
          </p>
          <pre><code>public class MainMenu {
    private final Scanner scanner;
    private final CultivoService cultivoService;
    private final ParcelaService parcelaService;
    private final ActividadService actividadService;
    
    public void mostrarMenuPrincipal() {
        boolean salir = false;
        while (!salir) {
            System.out.println("\n===== SISTEMA DE GESTIÓN AGRÍCOLA =====");
            System.out.println("1. Gestión de Cultivos");
            System.out.println("2. Gestión de Parcelas");
            System.out.println("3. Gestión de Actividades");
            System.out.println("4. Reportes y Búsquedas");
            System.out.println("0. Salir");
            System.out.print("Seleccione una opción: ");
            
            int opcion = scanner.nextInt();
            scanner.nextLine(); // Consumir el salto de línea
            
            switch (opcion) {
                case 1:
                    mostrarMenuCultivos();
                    break;
                case 2:
                    mostrarMenuParcelas();
                    break;
                // Otros casos
                case 0:
                    salir = true;
                    break;
                default:
                    System.out.println("Opción no válida");
            }
        }
    }
    
    // Implementación de los submenús
}</code></pre>
          <p>
            La interfaz de usuario está diseñada siguiendo estos principios:
          </p>
          <ul>
            <li>
              <strong>Separación de responsabilidades</strong>: La UI solo se encarga de la interacción con el usuario, delegando la lógica a los servicios.
            </li>
            <li>
              <strong>Validación de entradas</strong>: Cada entrada del usuario es validada para evitar errores y comportamientos inesperados.
            </li>
            <li>
              <strong>Mensajes claros</strong>: Se proporcionan mensajes informativos y de error que guían al usuario a través del sistema.
            </li>
            <li>
              <strong>Menús anidados</strong>: La organización jerárquica de los menús facilita la navegación por las distintas funcionalidades.
            </li>
          </ul>
          <p>
            Esta implementación por consola permite un acceso rápido y eficiente a todas las funcionalidades del sistema, siendo a la vez extensible para futuras mejoras.
          </p>
        </section>

        <section id="reflexiones" class="content-section">
          <h2>8. Reflexiones Finales</h2>
          <p style="text-align: justify;">
            Al concluir este proyecto, cada integrante del equipo comparte sus
            reflexiones sobre la experiencia, los aprendizajes y los desafíos
            encontrados:
          </p>
        
          <div style="margin: 30px 0; text-align: justify;">
            <h3 style="color: #2e7d32; border-bottom: 1px solid #2e7d32; padding-bottom: 5px; margin-bottom: 15px;">Nombre Apellido</h3>
            <p style="text-align: justify;">
              Este proyecto me permitió aplicar y profundizar en los conceptos de Programación Orientada a Objetos que hemos estudiado durante el curso. El mayor desafío fue diseñar un sistema que modelara correctamente las relaciones entre cultivos, parcelas y actividades agrícolas, manteniendo al mismo tiempo un código limpio y escalable.
              
              Aprendí la importancia de planificar adecuadamente la arquitectura antes de comenzar a codificar, lo que nos evitó numerosos problemas de diseño posteriormente. También descubrí el valor de los patrones de diseño como herramientas para resolver problemas comunes de manera elegante.
              
              Durante el desarrollo, enfrentamos dificultades con la persistencia de datos en CSV, especialmente al manejar relaciones entre entidades. Esto nos llevó a investigar y aplicar soluciones creativas que finalmente resultaron en un sistema más robusto.
            </p>
          </div>
        
          <div style="margin: 30px 0; text-align: justify;">
            <h3 style="color: #2e7d32; border-bottom: 1px solid #2e7d32; padding-bottom: 5px; margin-bottom: 15px;">Nombre Apellido</h3>
            <p style="text-align: justify;">
              La implementación de los principios SOLID fue uno de los aspectos más desafiantes y a la vez gratificantes de este proyecto. Comprendí la importancia de la responsabilidad única y cómo este principio facilita enormemente el mantenimiento del código.
              
              El trabajo en equipo utilizando Git fue fundamental para nuestro éxito, permitiéndonos colaborar de manera eficiente y resolver conflictos de forma organizada. Aprendí la importancia de la comunicación clara y la documentación exhaustiva en proyectos colaborativos.
              
              Como aprendizaje adicional, destacaría la experiencia en el manejo de excepciones y validaciones, aspectos cruciales para crear un sistema robusto que responda adecuadamente ante situaciones inesperadas o entradas incorrectas.
            </p>
          </div>
        </section>
      </div>
    </main>

    <footer>
      <div class="container">
        <p>© 2025 App2 - Sistema de Gestión Agrícola | Universidad Adolfo Ibáñez</p>
      </div>
    </footer>

    <!-- Botón para subir -->
    <button id="scrollToTopBtn" onclick="scrollToTop()">&#8679;</button>

    <script>
      // Obtener el botón
      const scrollToTopBtn = document.getElementById("scrollToTopBtn");

      // Mostrar el botón cuando se hace scroll hacia abajo
      window.onscroll = function () {
        if (
          document.body.scrollTop > 20 ||
          document.documentElement.scrollTop > 20
        ) {
          scrollToTopBtn.style.display = "flex";
        } else {
          scrollToTopBtn.style.display = "none";
        }
      };

      // Función para subir suavemente al inicio
      function scrollToTop() {
        window.scrollTo({ top: 0, behavior: "smooth" });
      }
    </script>
  </body>
</html>